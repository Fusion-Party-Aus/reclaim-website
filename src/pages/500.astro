---
import BaseLayout from '../layouts/BaseLayout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import { Icon } from 'astro-icon/components'
import '../styles/global.css'

const errorMessages = [
  'The server had an existential crisis',
  "Something broke (and it's definitely NOT your fault)",
  'Error 500: Our code went on strike',
  'The hamsters powering our server took a break',
  "We broke the internet. Sorr... wait, it's just our server",
  'This is embarrassing. Like, really embarrassing.',
  "The server encountered feelings. It didn't go well.",
]

const techErrors = [
  'NullPointerException: democracy.quality is null',
  'TypeError: majorParties.integrity is undefined',
  'ReferenceError: honesty is not defined',
  'Error: Stack overflow in corruption.js',
  'Warning: Deprecated function useTwoPartySystem()',
  'Fatal: Out of memory (from storing all the broken promises)',
]

const randomMessage = errorMessages[Math.floor(Math.random() * errorMessages.length)]
---

<BaseLayout
  title="500 - Server Error | Fusion Victoria"
  description="Oops! Something went wrong on our end."
>
  <Header />

  <main
    class="min-h-screen bg-gradient-to-br from-red-600 via-red-700 to-red-900 relative overflow-hidden pt-28 pb-20"
  >
    <!-- Fire and chaos background -->
    <div class="absolute inset-0 opacity-20">
      {
        [...Array(8)].map((_, i) => (
          <div
            class={`absolute text-8xl ${i % 2 === 0 ? 'text-orange-500' : 'text-yellow-400'}`}
            style={`
            top: ${Math.random() * 80 + 10}%;
            left: ${Math.random() * 90}%;
            animation: float ${3 + i}s ease-in-out infinite, flicker ${1 + i * 0.3}s ease-in-out infinite;
          `}
          >
            ðŸ”¥
          </div>
        ))
      }
    </div>

    <div class="max-w-6xl mx-auto px-4 relative z-10">
      <!-- Giant 500 -->
      <div class="text-center mb-12">
        <div class="relative inline-block mb-8">
          <div class="absolute inset-0 bg-orange-500 blur-3xl opacity-60 animate-pulse"></div>
          <h1
            class="relative text-[12rem] md:text-[20rem] font-black leading-none text-white"
            style="
              font-family: 'Anton', 'Archivo Black', sans-serif;
              text-shadow: 8px 8px 0px rgba(255, 152, 0, 0.8), 16px 16px 0px rgba(255, 235, 59, 0.6);
              animation: shake 0.5s ease-in-out infinite;
            "
          >
            500
          </h1>
        </div>

        <h2
          class="text-4xl md:text-6xl font-black uppercase text-white mb-6"
          style="font-family: 'Archivo Black', sans-serif; text-shadow: 4px 4px 0px rgba(0,0,0,0.5);"
        >
          INTERNAL SERVER ERROR
        </h2>

        <p
          class="text-2xl font-bold text-yellow-200"
          style="font-family: 'Space Grotesk', sans-serif;"
        >
          (We're the ones who messed up this time)
        </p>
      </div>

      <!-- Error Message Card -->
      <div class="max-w-3xl mx-auto mb-12 relative">
        <div
          class="absolute -top-8 -right-8 w-24 h-24 bg-yellow-400 border-6 border-black rotate-45 flex items-center justify-center"
          style="animation: spin 4s linear infinite;"
        >
          <Icon name="mdi:fire" class="w-16 h-16 text-red-600 -rotate-45" />
        </div>

        <div
          class="bg-black border-8 border-yellow-400 p-8 md:p-12"
          style="box-shadow: 12px 12px 0px 0px rgba(255, 152, 0, 1), 24px 24px 0px 0px rgba(0,0,0,0.5);"
        >
          <div class="flex items-start gap-4 mb-6">
            <div
              class="w-16 h-16 bg-red-600 border-5 border-white flex items-center justify-center flex-shrink-0"
              style="animation: wiggle 2s ease-in-out infinite;"
            >
              <Icon name="mdi:alert-octagon" class="w-10 h-10 text-white" />
            </div>
            <div>
              <h3
                class="text-3xl font-black uppercase text-yellow-400 mb-2"
                style="font-family: 'Archivo Black', sans-serif;"
              >
                OH NO!
              </h3>
              <p class="text-xl md:text-2xl font-bold text-white">
                {randomMessage}
              </p>
            </div>
          </div>

          <!-- Fake Console Output -->
          <div class="bg-gray-900 border-4 border-red-600 p-6 font-mono text-sm overflow-x-auto">
            <div class="flex items-center gap-2 mb-4 pb-2 border-b-2 border-gray-700">
              <div class="flex gap-2">
                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
              </div>
              <span class="text-gray-500 text-xs">console.error()</span>
            </div>
            {
              techErrors.map((error, i) => (
                <div
                  class="mb-2 text-red-400"
                  style={`animation: fadeIn 0.5s ease-in ${i * 0.2}s backwards;`}
                >
                  <span class="text-gray-600">[{new Date().toLocaleTimeString()}]</span> {error}
                </div>
              ))
            }
            <div class="mt-4 text-yellow-400 animate-pulse">&gt; Attempting to recover...</div>
          </div>
        </div>
      </div>

      <!-- Action Cards -->
      <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto mb-12">
        <button
          onclick="window.location.reload()"
          class="block bg-yellow-400 border-8 border-black p-8 text-center group transition-all hover:-translate-y-4 hover:rotate-3 relative overflow-hidden"
          style="box-shadow: 8px 8px 0px 0px #000;"
        >
          <div
            class="absolute top-0 right-0 w-32 h-32 bg-orange-500 opacity-30 rotate-45 -translate-y-12 translate-x-12 group-hover:scale-150 transition-transform"
          >
          </div>
          <div class="relative z-10">
            <div
              class="w-20 h-20 mb-4 mx-auto flex items-center justify-center bg-black border-5 border-white rounded-full group-hover:rotate-180 transition-transform duration-500"
            >
              <Icon name="mdi:refresh" class="w-12 h-12 text-yellow-400" />
            </div>
            <h3
              class="text-3xl font-black uppercase mb-2 text-black"
              style="font-family: 'Archivo Black', sans-serif;"
            >
              Try Again
            </h3>
            <p class="text-sm font-bold text-black">Maybe it'll work now?</p>
          </div>
        </button>

        <a
          href="/"
          class="block bg-white border-8 border-black p-8 text-center group transition-all hover:-translate-y-4 hover:-rotate-3 relative overflow-hidden"
          style="box-shadow: 8px 8px 0px 0px #000;"
        >
          <div
            class="absolute bottom-0 left-0 w-32 h-32 bg-yellow-400 opacity-30 -rotate-45 translate-y-12 -translate-x-12 group-hover:scale-150 transition-transform"
          >
          </div>
          <div class="relative z-10">
            <div
              class="w-20 h-20 mb-4 mx-auto flex items-center justify-center bg-red-600 border-5 border-black rounded-full group-hover:rotate-180 transition-transform duration-500"
            >
              <Icon name="mdi:home" class="w-12 h-12 text-white" />
            </div>
            <h3
              class="text-3xl font-black uppercase mb-2 text-black"
              style="font-family: 'Archivo Black', sans-serif;"
            >
              Go Home
            </h3>
            <p class="text-sm font-bold text-black">Safe haven awaits</p>
          </div>
        </a>

        <a
          href="/contact"
          class="block bg-orange-500 border-8 border-black p-8 text-center group transition-all hover:-translate-y-4 hover:rotate-2 relative overflow-hidden"
          style="box-shadow: 8px 8px 0px 0px #000;"
        >
          <div
            class="absolute top-0 left-0 w-32 h-32 bg-red-600 opacity-30 rotate-12 -translate-y-12 -translate-x-12 group-hover:scale-150 transition-transform"
          >
          </div>
          <div class="relative z-10">
            <div
              class="w-20 h-20 mb-4 mx-auto flex items-center justify-center bg-black border-5 border-white rounded-full group-hover:rotate-180 transition-transform duration-500"
            >
              <Icon name="mdi:email-alert" class="w-12 h-12 text-orange-500" />
            </div>
            <h3
              class="text-3xl font-black uppercase mb-2 text-white"
              style="font-family: 'Archivo Black', sans-serif;"
            >
              Report Bug
            </h3>
            <p class="text-sm font-bold text-white">Help us fix this!</p>
          </div>
        </a>
      </div>

      <!-- Apology Box -->
      <div class="max-w-2xl mx-auto">
        <div
          class="bg-white border-8 border-black p-8 transform -rotate-1"
          style="box-shadow: 10px 10px 0px 0px #ff9800;"
        >
          <div class="flex items-center gap-4 mb-6">
            <div
              class="w-16 h-16 bg-black border-4 border-yellow-400 flex items-center justify-center rotate-12"
            >
              <Icon name="mdi:emoticon-sad" class="w-10 h-10 text-yellow-400" />
            </div>
            <h3
              class="text-2xl font-black uppercase"
              style="font-family: 'Archivo Black', sans-serif;"
            >
              Our Sincere Apologies
            </h3>
          </div>
          <p class="text-lg font-bold text-gray-800 leading-relaxed mb-4">
            We're experiencing technical difficulties. Our team has been notified and we're working
            on it!
          </p>
          <p class="text-sm font-bold text-gray-600">
            Unlike the major parties, we actually admit when we make mistakes and work to fix them.
            ðŸ’ª
          </p>
        </div>
      </div>
    </div>
  </main>

  <Footer />
</BaseLayout>

<style>
  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  @keyframes shake {
    0%,
    100% {
      transform: translate(0, 0);
    }
    10%,
    30%,
    50%,
    70%,
    90% {
      transform: translate(-5px, 2px);
    }
    20%,
    40%,
    60%,
    80% {
      transform: translate(5px, -2px);
    }
  }

  @keyframes wiggle {
    0%,
    100% {
      transform: rotate(-5deg);
    }
    50% {
      transform: rotate(5deg);
    }
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes flicker {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateX(-10px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
</style>
